<!DOCTYPE html>
<html lang=en>

<head>
	<title>rpxl.app</title>

	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
	<meta http-equiv="Pragma" content="no-cache"/>
	<meta http-equiv="Expires" content="0"/>
	<meta name="msapplication-TileColor" content="#2e2e2e">
	<meta name="theme-color" content="#2e2e2e">
	<meta name="keywords" content="Gui Felix, Advertising, Visual Effects, Motion Graphics, Remote Pixels">
	<meta name="robots" content="index, follow">
	<meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="icons/favicon.ico">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="styles/style.css">
</head>
    
<body>

<!-- top navbar -->
	<div class="topnav" id="topnav">
        <div id="joinSession" class="joinSession" onclick="clickLiveSession()">Join a live session</div>
	</div>

	<div id="subNav"  class="topnav" style="background-color: #191919 ;display: none;">
		<img src="icons/android-chrome-192x192.png" class="siteIcon" id="siteIcon"/>
		<div class="ninjaIcon"><a href="https://vdo.ninja" target="_blank" class="vdoninjatext">Powered by<br>VDO.NINJA</a></div>
		<div class="clientLink" id="clientLink" style="right: 230px; top:16px;">Session ID : <div id="sessionLink" class="sessionLink" value="https://rpxl.app"></div></div>
		<div id="clock" class="clock" style="left: calc(100% - 240px);"></div>	
		<div id="exitSession" class="exitSession" onclick="window.location.href = 'http://www.google.com'">Leave</div>
	</div>

	<!--frames for chat and live stream-->
	<div title="chatIFrame" id="chatIFrame" class="chatIFrame" style="display:none"></div>
	<div title="mainIFrame" id="mainIFrame" class="mainIFrame" style="display:none"></div>

    <div id="siteHeader" class="siteHeader">
        <img src="icons/android-chrome-192x192.png" class="siteMainIcon"/>
        <div class="siteTitle">RPXL</div>
        <p></p>
        <div class="siteSubTitle">Simple,<br>secure,<br>serverless,<br>remote collaboration.</div>
    </div>

    <div id="textBG" class="textBG">
        <div id="opening text">
            <p>&nbsp;</p>
            <h3>
				Stream high quality video from anywhere, to anywhere using only your browser.
            </h3>
            <p>&nbsp;</p>
			Using the incredible open source <a href="https://vdo.ninja">vdo.ninja</a> software created by <a href="https://github.com/steveseguin/vdo.ninja">Steve Seguin</a>, RPXL allows real time editorial session reviews anywhere in the world. Customised for high quality, low latency, with a minimal interface to stay out of your way and let you concentrate on what matters, your edits.
            <p></p>
            Created as an alternative to server based messaging apps, vdo.ninja focuses on very low latency (less than 1 second) using webRTC and modern video codecs (vp9, Av1).
            <p></p>
            RPXL is a highly customised version vdo.ninja that focuses on one high quality primary video stream (up to 40mbps), with only minimal data used for communication between participants (typically between 30kbps to 60kbps per participant).
            <p></p>
            Optimised for fewer clients, typically under a dozen as typically attend editorial sessions in person, RPXL puts your work front and centre, letting you concentrate on your edit without the clutter of more complex messaging apps.
            <p>&nbsp;</p>
			<p>&nbsp;</p>
            
        </div>

		<div id="interface" class="interfaceHD" style="height:890px;">
            <h3>
                Designed to stay in the background providing only the functions need.<br>Designed to stay in the background providing only the functions need.
            </h3>
            <p>&nbsp;</p>
			<p>&nbsp;</p>
			<div><img src="images/interface.jpg" width="800" height="483"></div>
			<div style="position: relative; display: inline-flex; top: -545px; right: -175px;">Runs in the browser, no need for downloads or installs. </div>
			<div style="position: relative; display: inline-flex; top: -470px; right: 650px; width: 200px;"><h5>Sometimes bandwidth can be undependable, so send files directly for download and review. Files are sent from the host directly to the client, they are not stored on a server and so all links will vanish when the session ends.</h5></div>
			<div style="position: relative; display: inline-flex; top: -644px; left: 818px; width: 200px;"><h5>Clients connect with their camera and microphone in low quality, low bandwidth but very low latency (typically less than 40ms using only 40kbps per connection). All communication is peer to peer and encrypted, not passing through a central server.</h5></div>
			<div style="position: relative; display: inline-flex; top: -271px; left: 614px; width: 200px;"><h5>Minimal interface showing only the controls you need, download files. Mute the mic or camera, and settings.</h5></div>
			<div style="position: relative; display: inline-flex; top: -180px; right: 120px;"><h5>Your footage featured in beautiful Full HD</h5></div>
		</div>

		<div id="interface" class="interfaceMobile" style="height:890px; display:none;">
            <h3>
                Designed to stay in the background providing only the functions need.<br>Designed to stay in the background providing only the functions need.
            </h3>
            <p>&nbsp;</p>
			<p>&nbsp;</p>
			<div><img src="images/interfaceMobile.jpg" width="800" height="483"></div>
			<div style="position: relative; display: inline-flex; top: -545px; right: -175px;">Runs in the browser, no need for downloads or installs. </div>
			<div style="position: relative; display: inline-flex; top: -470px; right: 650px; width: 200px;"><h5>Sometimes bandwidth can be undependable, so send files directly for download and review. Files are sent from the host directly to the client, they are not stored on a server and so all links will vanish when the session ends.</h5></div>
			<div style="position: relative; display: inline-flex; top: -644px; left: 818px; width: 200px;"><h5>Clients connect with their camera and microphone in low quality, low bandwidth but very low latency (typically less than 40ms using only 40kbps per connection). All communication is peer to peer and encrypted, not passing through a central server.</h5></div>
			<div style="position: relative; display: inline-flex; top: -271px; left: 614px; width: 200px;"><h5>Minimal interface showing only the controls you need, download files. Mute the mic or camera, and settings.</h5></div>
			<div style="position: relative; display: inline-flex; top: -180px; right: 120px;"><h5>Your footage featured in beautiful Full HD</h5></div>
		</div>

        <div id="login" class="login" style="height:700px;">
            <div style="position: relative; display: inline-flex; width: 400px; left: 50px;"><img src="images/join.jpg" width="350" height="572" class="loginpic" >
                <div style="position: relative; left: 50px; top:50px; width: 350px;">
                    <h2>
                    Mic,<br>
                    camera,<br>
                    connect.<br>
                    </h2>
                    <div style="position: relative; top: 30px;">That's it, no unnecessary setup options, no screen share, no file share,<br>no beware.<br>
                        <p></p>
						Simple client logins, with only the tools they need.
                        <p></p>
                        <h5><sup>*</sup>Camera optional.</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="browser" style="height:500px;">
                <h3>
                    Runs in the browser,<br>
                    any browser.
                    <p></p>
                </h3>
                <div style="position: relative; display: inline-block; width:550px;">
                	Chrome, Safari, Firefox?
					<p></p>
                	RPXL Will run on nearly all modern browsers and on most modern desktop operating systems that support them. No software installs, no updating, no plugins required.
                	<p></p>
				</div>
				<div style="position: relative; display: inline-block; width:800px;">
					Tested on Safari, Chrome and Firefox, but all chromium based desktop browsers including Microsoft Edge, Opera, Brave or Vivaldi should work.<sup>*</sup>
					<p></p>
					<h5>
						*Microsoft Internet Explorer and Edge Classic will not work.<br>
						**Mobile support for Safari on iOs, iPadOs and Chrome on Android coming soon.
					</h5>
				</div>
            <div style="position: relative; display: inline-block; top: -370px; left: 560px;"><img src="images/browsers.png" width="200" height="198"></div>
        </div>

		<div id="secure" style="height:650px;">
			<div style="position: relative; display: flex; width:450px; left:350px;">
            <h3>
				Secure to the core..
            </h3>
			</div>
			<div style="position: relative; display: inline-block; top: -100px;"><img src="images/secure.jpg" width="300" height="520"></div>
			<div style="position: relative; display: block; width: 450px; top: -590px; left: 350px;">
            <p>&nbsp;</p>
			WebRTC was designed to be secure from the start and as such all transfers are encrypted using DTLS (Datagram Transport Layer Security) and SRTP (Secure Real-time Transport Protocol).
			<p></p>
			Added to HTTPS encryption this guarantees any communication between you and your clients, remains safe and secure.
			<p></p>
            RPXL is essentially a server-less application. Although a TURN or signalling server is used to negotiate the initial handshake connection, all data there after is transported directly from peer to peer.
            <p></p>
            This means your data is never sent through our servers, since there are none.
			<p></p>
			No worrying about what your data is being used for, no using your data to train AI, no cookies to track you.
            <p></p>
            </div>

        </div>


        <div id="credit" style="height:650px;">
            <p>&nbsp;</p>
            <h3>
				Credit, where credit is due.</h3>
            </h3>
            <p>&nbsp;</p>
			<div style="position: relative; display: inline-block; width:450px;">
				This entire application was created off the incredible open source project, vdo.ninja, created by Steve Seguin.
				<p></p>
				In its simplest form, VDO.Ninja brings live video from a smartphone, tablet, or remote computer, directly into OBS Studio or other browser-enabled software. VDO.Ninja is offered as a free web service, but it's also available as customisable and deployable code. Some have called it the modern Swiss Army knife of audio and video transmission.
				<p></p>
				We customised vdo.ninja for our admittedly niche use case, remote editorial workflows. Although other products are available we found their features and costs to be excessive for our use case. With the excellent API and controls created by Steve, we were able to create something, simple, fast and targeted at exactly our needs.
				<p></p>
			</div>
            <div style="position: relative; display: inline-block; left: 50px; top:-50px;"><img src="images/vdoninja.png" width="300" height="300"></div>
        </div>

        <div id="about" style="height:800px;">
            <p>&nbsp;</p>
            <h3>
				Good to know.</h3>
            </h3>
            <p>&nbsp;</p>
            Not having a central server introduces some benefits and some gotcha's that bear thinking about when using the application.
            <p></p>
			Most importantly your host PC must be able to encode and transmit the video in real time while you are working (although this can be offloaded to another machine).
			<p></p>
            Every extra guest that connects will increase the load on the hosts workstation, with a modern system and GPU, rooms of about twenty people should be doable, but more than that will put considerable strain on the host. We have tested up to a half dozen guests with moderate hardware and have not run in to issues, though your mileage may vary.
            <p></p>
            This application is not optimised for broadcasting to hundreds of viewers at a time.
            <p></p>
            As all Guests are connecting directly we recommend using wired ethernet for your host and if possible, your clients. Wifi has inherit lag issues which can disrupt stream. If clients are on the same internal network, data will be sent directly over LAN and not through the internet to those clients.
			<p></p>
            You may notice a bit of audio sync delay especially when the stream first starts, this should resolve within a second or so as the stream reaches capacity, we are aware of the issue. For this particular application we have prioritised speed for interactive feedback over perfect quality, we recommend sending high quality files over the sharing channel supplied with each session.
			<p></p>
			Keep in mind that any files you share will no longer be available once you as host, disconnect from the session, if you wish to share files for later review then a third party service will be required.
            <p></p>
            CAUTION: If session ID's are re-used, a client from the previous session may be able to join if they know when you are broadcating, so beware of re-using session ID's.
            <p></p>
        </div>

    </div>

	<div id="footer" class="footer">
		<div class="textBG">
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			Links 
			<p></p>
			<div style="position: relative; display: inline-block; width:400px;">
				<a href="https://vdo.ninja">vdo.ninja website</a><br>
				<a href="https://https://docs.vdo.ninja">vdo.ninja documentation</a><br>
				<a href="https://github.com/steveseguin/vdo.ninja">vdo.ninja github</a><br>
				<a href="https://discord.com/invite/T4xpQVv">Steve Seguin discord</a>	
			</div>
			<div style="position: relative; display: inline-block; width:300px; top:-3px;">
				<a href="https://ndi.video/tools/">ndi tools</a><br>
				<a href="https://obsproject.com">obs studio</a><br>
				<p>&nbsp;</p>
			</div>
			<br>
			<div style="position: relative; display: inline-block; width:800px;">
				<p style="text-align: right;">
					<a href="#top" style="text-align: right;">back to top</a>
				</p>
			</div>
			
		</div>
	</div>

	<!--popup window things-->
	<!--darken screen for popups-->
	<div class="blackout" id="blackout" role="button" onclick="fadeOutPopup()" style="display:none;">

		<!--fade and slide in popup window-->
		<div class="popupGroup" id="popupGroup"> 
            
			<!--popup window, draws the white popup window-->
			<div class="popupWindow" id="popupWindow" onclick="event.stopPropagation()">
				
				<!--popup window content : live session ID--> 
				<div id="sessionIDpopupContent">	
					<div class="popupTitle" style="width:445px;">
						Enter live session ID
						<p></p>
					</div>
					<form id="sessionIDCode" name="sessionIDCode" onsubmit="return checkSessionFile()" method="post" required="">
						<input name="sessionIDInput" id="sessionIDInput" type="text" autocomplete="one-time-code" maxlength="6" onkeypress="return onlyAlphabets(event,this);" oninput="this.value = this.value.toUpperCase()" tabindex="1" style="--_otp-digit: 6;">
						<br>
						<div style="display: flex; justify-content: center; align-items: center; width:445px;">
							<input type="submit" id="submitSessionID" value="Next" class="button" tabindex="2">
						</div>
					</form>
				</div>
				 
				<!--popup window content : ask for a username--> 
				<div class="askNamePopupContent" id="askNamePopupContent" style="animation: 300ms ease-out fadeIn; display: none;">
					<div class="popupTitle">Enter your name</div><p></p>
					<form id="stageName" name="stageName" onsubmit="return validateStageName()" method="post" required="">
						<input class="enterStageName" type="text" maxlength="11" name="enterStageName">
						<br>
						<div style="position: relative; padding: 20px; border-radius: 10px; width: 260px; left: 12px; margin-top: 10px; margin-bottom: 10px;">
							<div class="popupTitle">
								Important!
							</div>
							<br>
							<div class="subtext">
								Your browser may prompt you for microphone and camera access.
								<p></p>
								If you deny access other participants will not be able to hear or see you.
								</p><p>
								You can modify microphone and camera settings later via the settings gear.
							</div> 
						</div> 
						<input type="submit" value="Join" class="button">                            
					</form>
					</div>

				<!--popup window content : warning if on mobile device--> 
					<div id="mobileWarningPopupContent" style="animation: 300ms ease-out fadeIn; display: none;">
						<div class="popupTitle" style="width:445px;">
							Mobile support coming soon.
							<p></p>
						</div>
						<div style="position:relative; left:20px; top:20px; width:400px;">
						Currently, RPXL only supports desktop clients on Windows, Mac and Linux.
						<p></p>
						Support for mobile clients, iOs, iPadOs and Android is in development.
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>

<script type="text/javascript">  
/*
//check if on mobile device
let mobile = false;
//ipad pro workaround, not really working at moment
if ('ontouchstart' in window || (window?.DocumentTouch && document instanceof DocumentTouch)) {
	mobile = true;
}
//usual mobile detection
if (navigator.userAgent.match(/Android/i)
	|| navigator.userAgent.match(/webOS/i)
	|| navigator.userAgent.match(/iPhone/i)
	|| navigator.userAgent.match(/iPad/i)
	|| navigator.userAgent.match(/iPod/i)
	|| navigator.userAgent.match(/BlackBerry/i)
	|| navigator.userAgent.match(/Windows Phone/i)) {
	mobile = true;
} else {
	mobile = false;
}

if (mobile == 1) {
	sessionIDpopupContent.style.display = "none";
	mobileWarningPopupContent.style.display = "block";
	stop;
}
*/
//popup live session window if the live button is clicked
function clickLiveSession() {
	blackout.style.animation = "fadeIn 500ms ease-out";
	blackout.style.display = "block";
	setTimeout(function () { blackout.style.animation = "none";}, 300);
        document.forms["sessionIDCode"]["sessionIDInput"].focus();
	}
  			
//hide live session window when user clicks off
function fadeOutPopup() {
	blackout.style.animation = "fadeOut 300ms ease-out";
	setTimeout(function () { blackout.style.animation = "none"; blackout.style.display = "none"; }, 300);
	}

//cookie bits
//read cookie username value
function getCookie(cname) {
	let name = cname + "=";
	let decodedCookie = decodeURIComponent(document.cookie);
	let ca = decodedCookie.split(';');
	for(let i = 0; i < ca.length; i++) {
		let c = ca[i];
		while (c.charAt(0) == ' ') {
			c = c.substring(1);
			}
		if (c.indexOf(name) == 0) {
			return c.substring(name.length, c.length);
			}
		}
  	return "";
	}

//check if an URL parameter is supplied
//if there is clean the string and check the file
let query = location.search;
let sessionIDURL = query.slice(1);
let sessionIDUp = sessionIDURL.toUpperCase();
let	sessionFile = encodeURIComponent(sessionIDUp); 

if  ((sessionFile != 0) && (sessionFile.length == 6) && (mobile == 0)) {
	document.forms ["sessionIDCode"]["sessionIDInput"].value = sessionFile;	
	blackout.style.display = "block";
	checkSessionFile ();
	}  

//clock for top right of window
//clock check if and add zero in front of numbers < 10
function startTime() {
	const today = new Date();
        let h = today.getHours();
        let m = today.getMinutes();
	        let s = today.getSeconds();
        m = checkTime(m);
	    h = checkTime(h);
		    s = checkTime(s);
        document.getElementById('clock').innerHTML =  h + ":" + m + ":" +s ;
        setTimeout(startTime, 1000);
	}
function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
        }    
    
//Session ID field entry, force upper caase, restrict to alpha-numeric
const input = document.querySelector('[autocomplete=one-time-code');
input.addEventListener('input', () => input.style.setProperty('--_otp-digit', input.selectionStart));

function onlyAlphabets(e, t) {
	var regexp = new RegExp(/^[a-zA-Z0-9]*$/);
	if (window.event) {
		keynum = e.keyCode;
		}
	else if (e.which) {
		keynum = e.which;
		}
	var test = regexp.test(String.fromCharCode(keynum));
	return test;
	}

//submit session ID if user hits enter key
let inputSessionID = document.getElementById("sessionIDInput");
input.addEventListener("keypress", function(event) {
	if (event.key === "Enter") {
		event.preventDefault();
		document.getElementById("submitSessionID").click();
		}
	});
	
//checks the sessionID input is 6 characters long after encoding and auto fills username if cookie exists (been here in last 24 hours)
function checkSessionFile () {	
	let v1 = document.forms ["sessionIDCode"]["sessionIDInput"].value;
	let cookieStoredName = "";

	sessionFile = encodeURIComponent(v1); 
	let user = getCookie("username");
	if (user != "") {
		cookieStoredName = user;
	}

	if  ((sessionFile != 0) && (sessionFile.length == 6)) {
		sessionIDpopupContent.style.animation = "none";
		sessionIDpopupContent.style.display = "none";

		document.getElementById("sessionLink").innerHTML = sessionFile;
//		document.getElementById("sessionLink").value = +sessionFile;	
		
		askNamePopupContent.style.animation = "fadeIn 300ms ease-out";
		popupWindow.style.height = "420px";
		popupWindow.style.width = "320px";
		popupWindow.style.left = "calc(50% - 190px)";
		askNamePopupContent.style.display = "block";
		document.forms["stageName"]["enterStageName"].value = cookieStoredName;
		document.forms["stageName"]["enterStageName"].focus()
		return false;
	}
	else {
		popupWindow.style.animation = "shake 500ms";
		setTimeout ( function () {popupWindow.style.animation = "none"; document.forms["stageName"]["enterStageName"].focus(); }, 300); 
		document.forms["sessionIDCode"]["sessionIDInput"].focus();
		return false;
	}
}
	  
//if the session id checks out when user enters a name
//check the username (stagename), make sure it isn't empty, then clean up the string
//set a cookie and start the session
function validateStageName(){
	let varstageName = document.forms ["stageName"]["enterStageName"].value;
	//if they try to submit an empty name shake the box and highlight the stage name field
	if (!varstageName) {								
		popupWindow.style.animation = "shake 500ms";
		setTimeout ( function () {popupWindow.style.animation = "none"; document.forms["stageName"]["enterStageName"].focus(); }, 300);  
		return false;
		}
	//encode the name entered to a URI to escape any odd characters set cookie for next 24 hours
	else {
		//check if on mobile device
		let mobile = false;
		//ipad pro workaround, not really working at moment
		if ('ontouchstart' in window || (window?.DocumentTouch && document instanceof DocumentTouch)) {
			mobile = true;
		}
		//usual mobile detection
		if (navigator.userAgent.match(/Android/i)
			|| navigator.userAgent.match(/webOS/i)
			|| navigator.userAgent.match(/iPhone/i)
			|| navigator.userAgent.match(/iPad/i)
			|| navigator.userAgent.match(/iPod/i)
			|| navigator.userAgent.match(/BlackBerry/i)
			|| navigator.userAgent.match(/Windows Phone/i)) {
			mobile = true;
		} else {
			mobile = false;
		}
		let uri = document.forms ["stageName"]["enterStageName"].value;		
		let encodedUserName = encodeURIComponent(uri);     
		let expires = "expires=" + (new Date(Date.now() + 86400*1000).toUTCString());
		document.cookie = "username=" + encodedUserName + ";" + expires + ";path=/";

		//swap navigation bars, add clock and load vdoninja
		startTime ();

		blackout.style.display = "none";
		document.getElementById("topnav").style.display = "none";
		document.getElementById("siteHeader").style.display = "none";
		document.getElementById("textBG").style.display = "none";
		document.getElementById("footer").style.display = "none";
		document.getElementById("subNav").style.display = "block";
		document.getElementById("clientLink").style.display = "block";
		document.getElementById("sessionLink").style.display = "inline-block";

		if (mobile == 0) {
			document.getElementById("chatIFrame").style.display="inline-block";
			document.getElementById("mainIFrame").style.display="inline-block";
			
			//set sources for chat frame
			let chatFeed = "https://remotepixels.github.io/remotepixels.app/?room=RPXL_"+sessionFile+
				"&exclude=RPXL_"+sessionFile+"_Main_Feed"+	//do not show the main feed
				"&label="+encodedUserName+ //sets label to guests name they entered earlier
				"&showlabels"+	//show the usernames
				"&quality=3"+	//set camera quality to lowest possible, about 360p
				"&webcam"+	//disables screenshare use &webcam2 to show share your camera screen
				"&cover"+	//make video cover space
				"&videobitrate=100"+
				"&vdo=1"+	//auto select camera
				"&rounded=100"+	//makes videos round
				"&mirror=2"+	//mirrors guest videos
				"&viewwidth=160&viewheight=90"+	//sets incoming video to px size (very low res)
				"&safemode"+	//loads camera in simplist way
				"&st=6"+	//show audio only sources as coloured circles with first letter of name
				"&meterstyle=2"+	//round highlight over person talking
				"&hh"+	//hide vdo ninja header
				"&ee"+	//easy exit
				"&cv"+	//clean viewer
				"&hpb"+	//hide play button
				"&nsb"+	//hide speaker button
				"&nohub"+	//hide hangup button
				"&hidehome"+	//hide vdo ninja home page
				"&transparent"+	//makes bg transparent
				"&hidetranslate"+	//hides translate menu
				"&darkmode"+	//
				"&disablehotkeys"+	//no hotkeys
				"&nocontrols"+	//hides video player controls
				"&showlist=0"+	//show hidden guest list
				"&animate"+	//videos animate around when people join or leave
				"&css=https%3A%2F%2Frpxl.app%2Fstyles%2Fninjachat.css"+	//load style sheet
			""; 

			//set sources for main frame
			var mainFeed = "https://remotepixels.github.io/remotepixels.app/?room=RPXL_"+sessionFile+
				"&view=RPXL_"+sessionFile+"_Main_Feed"+ //shows only the directors main feed on left
				"&solo"+	//solos view only show the master stream
				"&cleanoutput"+	//remove all interface bits
				"&hideplaybutton"+	//hides big play button if autoplay is disabled
				"&cv"+	//clean viewer
				"&videobitrate=50000"+ //server limited but hey, ask for as much as possible
				"&scale=100"+	//do not scale video
				//"&chroma=121212"+
				"&transparent"+	//makes bg transparent
				"&buffer=1000"+	//adds a xms buffer  set by director
				"&showlist=0"+	//hides the hidden viewr list
				""; 

			//create the chat iframe
			var iframe = document.createElement("iframe");
			iframe.allow = "autoplay;camera;microphone;fullscreen;picture-in-picture;display-capture;allow-same-origin;allow-forms;allow-modals;allow-scripts;";
			iframe.src = chatFeed;
			var iframeContainer = document.createElement("div");
			iframeContainer.appendChild(iframe);
			document.getElementById("chatIFrame").appendChild(iframeContainer);

			//create the main stream frame (have to pause for a few secs)
			setTimeout(function(){
				var iframe = document.createElement("iframe");
				iframe.allow = "autoplay;camera;microphone;fullscreen;picture-in-picture;display-capture;";
				iframe.src = mainFeed;
				var iframeContainer = document.createElement("div");
				iframeContainer.appendChild(iframe);
				document.getElementById("mainIFrame").appendChild(iframeContainer);
				},1000);
			}
		else {
			//if we are on tablet or mobile device, load a different set of options
			document.getElementById("mainIFrame").style.top="0px";
			document.getElementById("subNav").style.display = "none";
			document.getElementById("mainIFrame").style.width="100%";
			document.getElementById("mainIFrame").style.height="100%";
			document.getElementById("mainIFrame").style.display="inline-block";

			let mainFeed = "https://remotepixels.github.io/remotepixels.app/?room=RPXL_"+sessionFile+
				"&broadcast"+	//show only directors feed
				"&label="+encodedUserName+ //sets label to guests name they entered earlier
				//"&showlabels"+	//show the usernames
				//"&quality=3"+	//set camera quality to lowest possible, about 360p
				"&webcam"+	//disables screenshare use &webcam2 to show share your camera screen
				//"&cover"+	//make video cover space
				//"&videobitrate=100"+
				"&vdo=0"+	//join without camera
				//"&rounded=100"+	//makes videos round
				//"&mirror=2"+	//mirrors guest videos
				//"&viewwidth=160&viewheight=90"+	//sets incoming video to px size (very low res)
				//"&safemode"+	//loads camera in simplist way
				//"&st=6"+	//show audio only sources as coloured circles with first letter of name
				//"&meterstyle=2"+	//round highlight over person talking
				"&hh"+	//hide vdo ninja header
				"&ee"+	//easy exit
				"&cv"+	//clean viewer
				"&hpb"+	//hide play button
				"&nsb"+	//hide speaker button
				"&nohub"+	//hide hangup button
				"&hidehome"+	//hide vdo ninja home page
				"&transparent"+	//makes bg transparent
				"&hidetranslate"+	//hides translate menu
				"&darkmode"+	//
				//"&disablehotkeys"+	//no hotkeys
				"&nocontrols"+	//hides video player controls
				"&showlist=1"+	//show hidden guest list
				//"&animate"+	//videos animate around when people join or leave
				"&css=https%3A%2F%2Frpxl.app%2Fstyles%2Fninjamobile.css"+	//load style sheet
			""; 

				var iframe = document.createElement("iframe");
				iframe.allow = "autoplay;camera;microphone;fullscreen;picture-in-picture;display-capture;";
				iframe.src = mainFeed;
				var iframeContainer = document.createElement("div");
				iframeContainer.appendChild(iframe);
				document.getElementById("mainIFrame").appendChild(iframeContainer);
		}
		return false;
	}
}
</script>
