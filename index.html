<!DOCTYPE html>
<html lang=en>

<head>
	<title>rpxl.app</title>

	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
	<meta http-equiv="Pragma" content="no-cache"/>
	<meta http-equiv="Expires" content="0"/>
	<meta name="msapplication-TileColor" content="#2e2e2e"/>
	<meta name="theme-color" content="#2e2e2e"/>
	<meta name="keywords" content="Gui Felix, Advertising, Visual Effects, Motion Graphics, Remote Pixels, vdo.ninja"/>
	<meta name="robots" content="index, follow"/>
	<meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<meta name="mobile-web-app-capable" content="yes"/>
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

	<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
	<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="icons/favicon.ico">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="styles/style.css">
</head>
    
<body>

<!-- top navbar -->
	<div class="topnav" id="topnav">
        <div id="joinSession" class="joinSession" onclick="clickLiveSession()">Join a live session</div>
	</div>

	<div id="subNav"  class="topnav" style="background-color: #191919 ;display: none;">
		<img src="icons/android-chrome-192x192.png" class="siteIcon" id="siteIcon"/>
		<div class="ninjaIcon"><a href="https://vdo.ninja" target="_blank" class="vdoninjatext">Powered by<br>VDO.NINJA</a></div>
		<div class="clientLink" id="clientLink" style="right: 230px; top:16px;">Session ID : <div id="sessionLink" class="sessionLink" value="https://rpxl.app"></div></div>
		<div id="clock" class="clock" style="left: calc(100% - 240px);"></div>	
		<div id="exitSession" class="exitSession" onclick="leave()">Leave</div>
	</div>

	<!--frames for chat and live stream-->
	<div title="chatIFrame" id="chatIFrame" class="chatIFrame" style="display:none"></div>
	<div title="mainIFrame" id="mainIFrame" class="mainIFrame" style="display:none"></div>

    <div id="siteHeader" class="siteHeader">
        <img src="icons/android-chrome-192x192.png" class="siteMainIcon"/>
        <div class="siteTitle">RPXL</div>
        <p></p>
        <div class="siteSubTitle">Simple,<br>secure,<br>server less,<br>remote collaboration.</div>
    </div>

    <div id="textBG" class="textBG">
        <div id="opening text" class="openingText" style="height:550px;">
            <p>&nbsp;</p>
            <h3>
				Stream high quality video from anywhere, to anywhere using only your browser.
            </h3>
            <p>&nbsp;</p>
			Using the incredible open source <a href="https://vdo.ninja">vdo.ninja</a> software created by <a href="https://github.com/steveseguin/vdo.ninja">Steve Seguin</a>, RPXL is an optimised and simplified front end focused for realtime, remote editorial approvals.
            <p></p>
            Created as an alternative to server based messaging apps, vdo.ninja uses a peer to peer model allowing very low latency (less than 1 second) using webRTC and modern video codecs (vp9, Av1).
            <p></p>
            Bandwidth is concentrated on one high quality primary video stream, (at the moment up to 20Mbps) for your edit, and only minimal data used for communication between participants (typically between 30kbps to 60kbps per participant), RPXL puts your work front and centre.
			<p>&nbsp;</p>
        </div>

		<div id="interface" class="interfaceHD" style="height:820px;">
            <h3>
                Designed to stay in the background, providing only the functions need.<br>
            </h3>
            <p>&nbsp;</p>
			<p>&nbsp;</p>
			<div><img src="images/interface.jpg" width="800" height="483"></div>
			<div style="position: relative; display: inline-flex; top: -545px; right: -175px;">Runs in the browser, no need for downloads or installs. </div>
			<div style="position: relative; display: inline-flex; top: -470px; right: 650px; width: 200px;" class="interfaceSideText"><h5>Sometimes bandwidth can be limited, so you can send high resolution files directly for download and review. Files are sent from the host directly to the client, never saved to a server.</h5></div>
			<div style="position: relative; display: inline-flex; top: -620px; left: 818px; width: 200px;" class="interfaceSideText"><h5>Clients connect with their camera and microphone using low bandwidth but also very low latency (typically less than 40ms using only 40kbps per connection).<p></p> All communication is direct peer to peer and encrypted.</h5></div>
			<div style="position: relative; display: inline-flex; top: -240px; left: 614px; width: 200px;" class="interfaceSideText"><h5>Minimal interface showing only the controls you need, download files. Mute the mic or camera, and settings.</h5></div>
			<div style="position: relative; display: inline-flex; top: -150px; right: 120px;"><h5>Your footage featured in beautiful Full HD</h5></div>
		</div>

		<div id="interfaceMobile" class="interfaceMobile" style="height:580px; display:none;">
            <h3>
                Four mobile.
            </h3>
            <p>&nbsp;</p>
			Four buttons, that's it, view your edit clutter free on the go, no distractions. <br>
			<br>
			<div><img src="images/intefacemobile.jpg" width="600" height="277" class="interfaceMobileImage"></div>
			<div style="position: relative; display: inline-block;">
				<p></p>
				Connect, watch and chat, all in the browser, no need for downloads or installs. 
				<p></p> 
				Receive files, mute your microphone and audio settings. For mobile a simple user list shows the participants without video so your bandwidth goes where it's needed most, the edit.
				<p></p>
			</div>
		</div>

        <div id="login" class="login" style="height:700px;">
            <div style="position: relative; display: inline-flex; width: 400px; left: 50px;"><img src="images/join.jpg" width="350" height="572" class="loginpic" >
                <div style="position: relative; left: 50px; top:0px; width: 350px;">
                    <h2>
                    Mic,<br>
                    camera,<br>
                    connect.<br>
                    </h2>
                    <div style="position: relative; top: 30px;">That's it, no unnecessary setup options, connect with the minimal fuss.<br>
                        <p></p>
						Simple client logins, with only the tools they need. Using the browsers in built camera and microphone utilities we've removed options like screen sharing, waiting rooms, text chats and other complications.
                        <p></p>
                        <h5><sup>*</sup>Camera optional.</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="browser" class="browser" style="height:500px;">
                <h3>
                    Runs in the browser,<br>
                    any browser.
                    <p></p>
                </h3>
                <div style="position: relative; display: inline-block; width:550px;">
                	Chrome, Safari, Firefox?
					<p></p>
                	RPXL Will run on nearly all modern browsers and on most modern desktop operating systems that support them. No software installs, no updating, no plugins required.
                	<p></p>
					Safari on iOs and Chrome on Android are also supported for the mobile warriors amongst you.
					<p></p>
				</div>
				<div style="position: relative; display: inline-block; width:800px;">
					Tested on Safari, Chrome and Firefox, but all chromium based desktop browsers including Microsoft Edge, Opera, Brave or Vivaldi should work.<sup>*</sup>
					<p></p>
					<h5>
						*Microsoft Internet Explorer and Edge Classic will not work.<br>
					</h5>
				</div>
            <div style="position: relative; display: inline-block; top: -370px; left: 560px;"><img src="images/browsers.png" width="200" height="198"></div>
        </div>

		<div id="secure" class="secure" style="height:750px;">
			<div style="position: relative; display: flex; width:450px; left:350px;">
            <h3>
				Secure to the core.
            </h3>
			</div>
			<div style="position: relative; display: inline-block; top: -100px;"><img src="images/secure.jpg" width="300" height="520"></div>
			<div style="position: relative; display: block; width: 450px; top: -590px; left: 350px;">
            <p>&nbsp;</p>
			WebRTC was designed to be secure from the start and as such all transfers are encrypted using DTLS (Datagram Transport Layer Security) and SRTP (Secure Real-time Transport Protocol).
			<p></p>
			Added to HTTPS encryption this guarantees any communication between you and your clients, remains safe and secure.
			<p></p>
            vdo.ninja and RPXL are essentially server-less. STUN (Session Traversal Utilities for NAT) servers help devices behind NAT (Network Address Translation) determine their public IP address and port. This process facilitates peer-to-peer connections in most scenarios, even when devices are located in different network environments. When STUN is not enough, such as in more complex network setups with strict NAT policies, TURN (Traversal Using Relays around NAT) servers help relay traffic between devices.
            <p></p>
            All this is handled invisibly and securely behind the scenes, this means your data is encrypted, stays encrypted and is never saved to a central server.
			<p></p>
			No worrying about what your data is being used for, no using your data to train AI, no cookies to track you.
            <p></p>
            </div>

        </div>
		<div id="secureMobile" class="secureMobile" style="height:580px; display:none;">
            <h3>
				Secure to the core.
            </h3>
			<p>&nbsp;</p>
			<img src="images/securemobile.png" width="600" height="93" class="secureMobileImage">
			<p></p>
			WebRTC was designed to be secure from the start and as such all transfers are encrypted using DTLS (Datagram Transport Layer Security) and SRTP (Secure Real-time Transport Protocol).
			<p></p>
			Added to HTTPS encryption this guarantees any communication between you and your clients, remains safe and secure.
			<p></p>
            vdo.ninja and RPXL are essentially server-less. STUN (Session Traversal Utilities for NAT) servers help devices behind NAT (Network Address Translation) determine their public IP address and port. This process facilitates peer-to-peer connections in most scenarios, even when devices are located in different network environments. When STUN is not enough, such as in more complex network setups with strict NAT policies, TURN (Traversal Using Relays around NAT) servers help relay traffic between devices.
            <p></p>
            All this is handled invisibly and securely behind the scenes, this means your data is encrypted, stays encrypted and is never saved to a central server.
			<p></p>
			No worrying about what your data is being used for, no using your data to train AI, no cookies to track you.
            <p></p>
        </div>

        <div id="credit" class="credit" style="height:550px;">
            <p>&nbsp;</p>
            <h3>
				Credit, where credit is due.</h3>
            </h3>
            <p>&nbsp;</p>
			<div style="position: relative; display: inline-block; width:calc(100% - 250px)" class="creditText">
				Created by Steve Seguin, vdo.ninja, in its simplest form allows live video from a smartphone, tablet, or remote computer to be sent directly into OBS Studio or other browser-enabled software. It is offered as a free web service, but also available as customisable and deployable code. Some have called it the modern Swiss Army knife of audio and video transmission.
				<p></p>
				We customised vdo.ninja for our admittedly niche use case, remote editorial workflows. Although other products are available we found their features and costs to be excessive for our use. With the excellent API and controls created by Steve, we were able to create something, simple, fast and targeted at exactly our needs.
				<p></p>
				vdo.ninja has a massive amount of customisable parameters and options and we highly recommend you check it out if you wish to set up a similar service, links are provided bellow to both the projects github page and Steve's Discord channel.
				<p></p>
			</div>

            <div style="position: relative; display: inline; left: 10px; vertical-align: top;">
				<img src="images/vdoninja.png" width="200" height="200" class="creditIcon">
			</div>
        </div>

        <div id="about" class="about" style="height:1300px;">
            <p>&nbsp;</p>
            <h3>
				Good to know.</h3>
            </h3>
            <p>&nbsp;</p>
            Not having a central server to manage connections and encoding introduces some benefits and some limitations when using the application.
            <p></p>
            Most importantly your host PC must be able to encode and transmit the video in real time while you are working , we recommend offloading this function to another separate machine from your edit workstation, although this may not be necessary depending on your hardware configuration.
			<p></p>
            Every extra client that connects will increase the load on the hosts workstation, with a modern system and GPU, rooms of about twenty people should be doable, but more than that will put considerable strain on the host. We have tested up to a dozen guests with moderate hardware and have not run in to issues, though your mileage may vary.
            <p></p>
            This application is not optimised for broadcasting to hundreds of viewers at a time, although vdo.ninja does have a mesh-cast option for this scenario we've chosen not to implement it as it adds an unnecessary delay to the main feed.
            <p></p>
            As all Guests are connecting directly we strongly recommend using wired ethernet for your host, and if possible, your clients. Wifi has inherit latency issues which can disrupt stream. If clients are on the same internal network, data will be sent directly over LAN and not through the internet to those clients, wich helps reduce the load on your internet connection.
			<p></p>
            Keep in mind that any files you share will no longer be available once you as host, disconnect from the session, if you wish to share files for later review then a third party service will be required. Also, a separate stream is created for every client that downloads the file from you, this can very quickly saturate your internet connection if say a dozen clients are trying to download a 10GB file from you.
            <p></p>
            RPXL uses the browsers built in camera capture capability, how you get from your edit software to the browser is up to you, but we recommend ndi tools from vizrt. You can also use hdmi to usb capture devices that report as a webcam to the browser. However be aware that some of these do introduce a colour shift as they sometimes apply a LUT over the captured footage which may already have a LUT applied from your edit software for monitoring.
			<p></p>
            Occasionally, in stricter corporate environments, admins may have blocked access to the clients camera or microphone, although this seems to have been relaxed in the last few years, it can create a situation where the client connection is refused because the browser blocks access to the camera or microphone, adjusting the permissions setting for your browser should fix this, and a quick google search should resolve the issue.
            <p></p>
			As the primary streamer be aware that if you re-use Session ID's (the 6 digit alpha alpha-numeric code), a client from the previous session may be able to re-join if they know when you are broadcasting, this can work to your benefit if you want to continue an earlier session but potentially a client from a previous session could join a new session if the same code is reused.			<p></p>
            If creating a Session ID manually, avoid simple codes such as 123456 or ABCDEF, as these can be easily guessed, and you may have unwanted guests join the session.
            <p></p>
            At the moment the guest queue is disabled so anyone knowing the Session ID can join, you can isolate, disconnect and monitor guests using the monitoring or server console but if you wish to manually approve every client connecting, you can add &queue to the end of the session ID in the URL you send them.			<p></p>
		</div>

    </div>

	<div id="footer" class="footer">
		<div class="textBG">
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			Links 
			<p></p>
			<div style="position: relative; display: inline-block; width:50%;">
				<a href="https://vdo.ninja">vdo.ninja website</a><br>
				<a href="https://https://docs.vdo.ninja">vdo.ninja documentation</a><br>
				<a href="https://github.com/steveseguin/vdo.ninja">vdo.ninja github</a>
				<p></p>
				<a href="https://discord.com/invite/T4xpQVv">Steve Seguin discord</a>	
			</div>
			<div style="position: relative; display: inline-block; top:-19px;">
				<a href="https://ndi.video/tools/">ndi tools</a><br>
				<a href="https://obsproject.com">obs studio</a><br>
				<p>&nbsp;</p>
			</div>
			<br>
			<div style="position: relative; display: inline-block; width:100%;">
				<p style="text-align: right;">
					<a href="#top" style="text-align: right;">back to top</a>
				</p>
			</div>
			
		</div>
	</div>

	<!--popup window things-->
	<!--darken screen for popups-->
	<div class="blackout" id="blackout" role="button" onclick="fadeOutPopup()" style="display:none;">

		<!--fade and slide in popup window-->
		<div class="popupGroup" id="popupGroup"> 
            
			<!--popup window, draws the white popup window-->
			<div class="popupWindow" id="popupWindow" onclick="event.stopPropagation()">
				
				<!--popup window content : live session ID--> 
				<div id="sessionIDpopupContent">	
					<div class="popupTitle" style="width:445px;">
						Enter live session ID
						<p></p>
					</div>
					<form id="sessionIDCode" name="sessionIDCode" onsubmit="return checkSessionFile()" method="post" required="">
						<input name="sessionIDInput" id="sessionIDInput" type="text" autocomplete="one-time-code" maxlength="6" onkeypress="return onlyAlphabets(event,this);" oninput="this.value = this.value.toUpperCase()" tabindex="1" style="--_otp-digit: 6;">
						<br>
						<div style="display: flex; justify-content: center; align-items: center; width:445px;">
							<input type="submit" id="submitSessionID" value="Next" class="button" tabindex="2">
						</div>
					</form>
				</div>
				 
				<!--popup window content : ask for a username--> 
				<div class="askNamePopupContent" id="askNamePopupContent" style="animation: 300ms ease-out fadeIn; display: none;">
					<div class="popupTitle">Enter your name</div><p></p>
					<form id="stageName" name="stageName" onsubmit="return validateStageName()" method="post" required="">
						<input class="enterStageName" type="text" maxlength="9" name="enterStageName">
						<br>
						<div style="position: relative; padding: 20px; border-radius: 10px; width: 260px; left: 12px; margin-top: 10px; margin-bottom: 10px;">
							<div class="popupTitle">
								Important!
							</div>
							<br>
							<div class="subtext" id="subtext">
								Your browser may prompt you for microphone and camera access.
								<p></p>
								If you deny access other participants will not be able to hear or see you.
								</p><p>
								You can modify microphone and camera settings later via the settings gear.
							</div> 
						</div> 
						<input type="submit" value="Join" class="button">                            
					</form>
					</div>

				<!--popup window content : warning if on mobile device--> 
					<div id="mobileWarningPopupContent" style="animation: 300ms ease-out fadeIn; display: none;">
						<div class="popupTitle" style="width:445px;">
							Mobile support coming soon.
							<p></p>
						</div>
						<div style="position:relative; left:20px; top:20px; width:400px;">
						Currently, RPXL only supports desktop clients on Windows, Mac and Linux.
						<p></p>
						Support for mobile clients, iOs, iPadOs and Android is in development.
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>

<script type="text/javascript">  
//popup live session window if the live button is clicked
function clickLiveSession() {
	blackout.style.animation = "fadeIn 500ms ease-out";
	blackout.style.display = "block";
	setTimeout(function () { blackout.style.animation = "none";}, 300);
        document.forms["sessionIDCode"]["sessionIDInput"].focus();
	}
  			
//hide live session window when user clicks off
function fadeOutPopup() {
	blackout.style.animation = "fadeOut 300ms ease-out";
	setTimeout(function () { blackout.style.animation = "none"; blackout.style.display = "none"; }, 300);
	}

//cookie bits
//read cookie username value
function getCookie(cname) {
	let name = cname + "=";
	let decodedCookie = decodeURIComponent(document.cookie);
	let ca = decodedCookie.split(';');
	for(let i = 0; i < ca.length; i++) {
		let c = ca[i];
		while (c.charAt(0) == ' ') {
			c = c.substring(1);
			}
		if (c.indexOf(name) == 0) {
			return c.substring(name.length, c.length);
			}
		}
  	return "";
	}

//check if an URL parameter is supplied
//if there is clean the string and check the file
let query = location.search;
let sessionIDURL = query.slice(1);
let sessionIDUp = sessionIDURL.toUpperCase();
let	sessionFile = encodeURIComponent(sessionIDUp); 

if  ((sessionFile != 0) && (sessionFile.length == 6)) {
	document.forms ["sessionIDCode"]["sessionIDInput"].value = sessionFile;	
	blackout.style.display = "block";
	checkSessionFile ();
	}  

//clock for top right of window
//clock check if and add zero in front of numbers < 10
function startTime() {
	const today = new Date();
        let h = today.getHours();
        let m = today.getMinutes();
	        let s = today.getSeconds();
        m = checkTime(m);
	    h = checkTime(h);
		    s = checkTime(s);
        document.getElementById('clock').innerHTML =  h + ":" + m + ":" +s ;
        setTimeout(startTime, 1000);
	}
function checkTime(i) {
        if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
        return i;
        }    
    
//Session ID field entry, force upper caase, restrict to alpha-numeric
const input = document.querySelector('[autocomplete=one-time-code');
input.addEventListener('input', () => input.style.setProperty('--_otp-digit', input.selectionStart));

function onlyAlphabets(e, t) {
	var regexp = new RegExp(/^[a-zA-Z0-9]*$/);
	if (window.event) {
		keynum = e.keyCode;
		}
	else if (e.which) {
		keynum = e.which;
		}
	var test = regexp.test(String.fromCharCode(keynum));
	return test;
	}

//submit session ID if user hits enter key
let inputSessionID = document.getElementById("sessionIDInput");
inputSessionID.addEventListener("keypress", function(event) {
	if (event.key === "Enter") {
		event.preventDefault();
		document.getElementById("submitSessionID").click();
		}
	});
	
//checks the sessionID input is 6 characters long after encoding and auto fills username if cookie exists (been here in last 24 hours)
function checkSessionFile () {	
	let v1 = document.forms ["sessionIDCode"]["sessionIDInput"].value;
	let cookieStoredName = "";

	sessionFile = encodeURIComponent(v1); 
	let user = getCookie("username");
	if (user != "") {
		cookieStoredName = user;
	}

	if  ((sessionFile != 0) && (sessionFile.length == 6)) {
		sessionIDpopupContent.style.animation = "none";
		sessionIDpopupContent.style.display = "none";

		document.getElementById("sessionLink").innerHTML = sessionFile;
//		document.getElementById("sessionLink").value = +sessionFile;	
		
		askNamePopupContent.style.animation = "fadeIn 300ms ease-out";
		popupWindow.style.height = "420px";
		popupWindow.style.width = "320px";
		popupWindow.style.left = "calc(50% - 190px)";
		askNamePopupContent.style.display = "block";
		document.forms["stageName"]["enterStageName"].value = cookieStoredName;
		document.forms["stageName"]["enterStageName"].focus()
		return false;
	}
	else {
		popupWindow.style.animation = "shake 500ms";
		setTimeout ( function () {popupWindow.style.animation = "none"; document.forms["stageName"]["enterStageName"].focus(); }, 300); 
		document.forms["sessionIDCode"]["sessionIDInput"].focus();
		return false;
	}
}
	  
//if the session id checks out when user enters a name
//check the username (stagename), make sure it isn't empty, then clean up the string
//set a cookie and start the session
function validateStageName(){
	let varstageName = document.forms ["stageName"]["enterStageName"].value;
	//if they try to submit an empty name shake the box and highlight the stage name field
	if (!varstageName) {								
		popupWindow.style.animation = "shake 500ms";
		setTimeout ( function () {popupWindow.style.animation = "none"; document.forms["stageName"]["enterStageName"].focus(); }, 300);  
		return false;
		}
	//encode the name entered to a URI to escape any odd characters set cookie for next 24 hours
	else {
		//check if on mobile device
		let mobile = false;
		//ipad pro workaround, not really working at moment
		if ('ontouchstart' in window || (window?.DocumentTouch && document instanceof DocumentTouch)) {
			mobile = true;
		}
		//usual mobile detection
		if (navigator.userAgent.match(/Android/i)
			|| navigator.userAgent.match(/webOS/i)
			|| navigator.userAgent.match(/iPhone/i)
			|| navigator.userAgent.match(/iPad/i)
			|| navigator.userAgent.match(/iPod/i)
			|| navigator.userAgent.match(/BlackBerry/i)
			|| navigator.userAgent.match(/Windows Phone/i)) {
			mobile = true;
		} else {
			mobile = false;
		}
		let uri = document.forms ["stageName"]["enterStageName"].value;		
		let encodedUserName = encodeURIComponent(uri);     
		let expires = "expires=" + (new Date(Date.now() + 86400*1000).toUTCString());
		document.cookie = "username=" + encodedUserName + ";" + expires + ";path=/";

		//swap navigation bars, add clock and load vdoninja
		startTime ();

		blackout.style.display = "none";
		document.getElementById("topnav").style.display = "none";
		document.getElementById("siteHeader").style.display = "none";
		document.getElementById("textBG").style.display = "none";
		document.getElementById("footer").style.display = "none";
		document.getElementById("subNav").style.display = "block";
		document.getElementById("clientLink").style.display = "block";
		document.getElementById("sessionLink").style.display = "inline-block";

		if (mobile == 0) {
			document.getElementById("chatIFrame").style.display="inline-block";
			document.getElementById("mainIFrame").style.display="inline-block";
			
			//set sources for chat frame
			let chatFeed = "https://vdo.rpxl.app/?room=RPXL_"+sessionFile+
				//"&exclude=RPXL_"+sessionFile+"_Main_Feed"+	//do not show the main feed
				//"&showall"+
				"&label="+encodedUserName+ //sets label to guests name they entered earlier
				"&showlabels"+	//show the usernames
				"&quality=3"+	//set camera quality to lowest possible, about 360p
				"&webcam"+	//disables screenshare use &webcam2 to show share your camera screen
				"&cover"+	//make video cover space
				"&videobitrate=100"+
				"&vdo=1"+	//auto select camera
				"&rounded=100"+	//makes videos round
				//"&mirror=2"+	//mirrors guest videos
				"&viewwidth=160&viewheight=90"+	//sets incoming video to px size (very low res)
				"&safemode"+	//loads camera in simplist way
				"&st=6"+	//show audio only sources as coloured circles with first letter of name
				"&meterstyle=2"+	//round highlight over person talking
				"&hh"+	//hide vdo ninja header
				"&ee"+	//easy exit
				"&cv"+	//clean viewer
				"&hpb"+	//hide play button
				"&nsb"+	//hide speaker button
				"&nohub"+	//hide hangup button
				"&hidehome"+	//hide vdo ninja home page
				"&transparent"+	//makes bg transparent
				"&hidetranslate"+	//hides translate menu
				"&darkmode"+	//
				"&disablehotkeys"+	//no hotkeys
				"&nocontrols"+	//hides video player controls
				"&showlist=0"+	//show hidden guest list
				//"&queue"+ 	//guests must be allowed in by director
				"&animate"+	//videos animate around when people join or leave
				"&tips"+
				"&js=https%3A%2F%2Frpxl.app%2Fscripts%2Fchat.js"
				"&css=https%3A%2F%2Frpxl.app%2Fstyles%2Fninjachat.css"+	//load style sheet
			""; 

			//set sources for main frame
			var mainFeed = "https://vdo.rpxl.app/?room=RPXL_"+sessionFile+
				//"&view=RPXL_"+sessionFile+"_Main_Feed"+ //shows only the directors main feed on left
				"&broadcast"+
				"&solo"+	//solos view only show the master stream
				"&cleanoutput"+	//remove all interface bits
				"&hideplaybutton"+	//hides big play button if autoplay is disabled
				"&cv"+	//clean viewer
				"&videobitrate=50000"+ //server limited but hey, ask for as much as possible
				"&scale=100"+	//do not scale video
				//"&queue"+ 	//guests must be allowed in by director
				//"&chroma=121212"+
				"&transparent"+	//makes bg transparent
				"&preloadbitrate=-1"+	//preloads the video, might not be necessary as only use scene 1
				"&waitimage=https%3A%2F%2Frpxl.app%2Fimages%2FnosignalHD.png"+
				"&buffer=500"+	//adds a xms buffer
				"&showlist=0"+	//hides the hidden viewr list
				""; 

			//create the chat iframe
			var iframe = document.createElement("iframe");
			iframe.allow = "autoplay;camera;microphone;fullscreen;picture-in-picture;display-capture;";
			iframe.src = chatFeed;
			var iframeContainer = document.createElement("div");
			iframeContainer.appendChild(iframe);
			document.getElementById("chatIFrame").appendChild(iframeContainer);

			//create the main stream frame (have to pause for a few secs)
			setTimeout(function(){
				var iframe = document.createElement("iframe");
				iframe.allow = "autoplay;camera;microphone;fullscreen;picture-in-picture;display-capture;";
				iframe.src = mainFeed;
				var iframeContainer = document.createElement("div");
				iframeContainer.appendChild(iframe);
				document.getElementById("mainIFrame").appendChild(iframeContainer);
				},1000);
			}
		else {
			//if we are on tablet or mobile device, load a different set of options
			document.getElementById("mainIFrame").style.top="0px";
			document.getElementById("subNav").style.display = "none";
			document.getElementById("mainIFrame").style.width="100%";
			document.getElementById("mainIFrame").style.height="100vh";
			document.getElementById("mainIFrame").style.display="inline-block";

			let mainFeed = "https://vdo.rpxl.app/?room=RPXL_"+sessionFile+
				"&broadcast"+	//show only directors feed
				"&label="+encodedUserName+ //sets label to guests name they entered earlier
				//"&showlabels"+	//show the usernames
				//"&quality=3"+	//set camera quality to lowest possible, about 360p
				"&mobile"+	//sets for mobile devices (no video etc)
				"&webcam"+	//disables screenshare use &webcam2 to show share your camera screen
				//"&cover"+	//make video cover space
				//"&videobitrate=100"+
				"&vdo=0"+	//join without camera
				//"&rounded=100"+	//makes videos round
				//"&mirror=2"+	//mirrors guest videos
				//"&viewwidth=160&viewheight=90"+	//sets incoming video to px size (very low res)
				//"&safemode"+	//loads camera in simplist way
				//"&st=6"+	//show audio only sources as coloured circles with first letter of name
				//"&meterstyle=2"+	//round highlight over person talking
				"&hh"+	//hide vdo ninja header
				"&ee"+	//easy exit
				"&cv"+	//clean viewer
				"&hpb"+	//hide play button
				"&nsb"+	//hide speaker button
				"&nohub"+	//hide hangup button
				"&hidehome"+	//hide vdo ninja home page
				"&transparent"+	//makes bg transparent
				"&hidetranslate"+	//hides translate menu
				"&darkmode"+	//
				"&buffer=500"+	//adds a xms buffer
				"&preloadbitrate=-1"+	//preloads the video, might not be necessary as only use scene 1
				//"&scale=100"+	//do not scale video
				//"&queue"+
				//"&disablehotkeys"+	//no hotkeys
				"&nocontrols"+	//hides video player controls
				"&showlist=1"+	//show hidden guest list
				"&waitimage=https%3A%2F%2Frpxl.app%2Fimages%2FnosignalHD.png"+
				//"&animate"+	//videos animate around when people join or leave
				"&css=https%3A%2F%2Frpxl.app%2Fstyles%2Fninjamobile.css"+	//load style sheet
			""; 

			var iframe = document.createElement("iframe");
			iframe.allow = "autoplay;camera;microphone;picture-in-picture;display-capture;";
			iframe.src = mainFeed;
			var iframeContainer = document.createElement("div");
			iframeContainer.appendChild(iframe);
			document.getElementById("mainIFrame").appendChild(iframeContainer);
    	}	
		return false;
	}
}
function leave () {
		//reset site to as first arrived
		let frame = document.getElementById("mainIFrame");
		frame.parentNode.removeChild(frame);
		
		frame = document.getElementById("chatIFrame");
		frame.parentNode.removeChild(frame);

		document.getElementById("topnav").style.display = "block";
		document.getElementById("siteHeader").style.display = "block";
		document.getElementById("textBG").style.display = "block";
		document.getElementById("footer").style.display = "block";

		document.getElementById("subNav").style.display = "none";
		document.getElementById("clientLink").style.display = "none";
}
</script>
